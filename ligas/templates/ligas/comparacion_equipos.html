{% extends 'ligas/base.html' %}

{% block content %}
<style>
    h2 { color: #f4c430; margin-bottom: 20px; font-size: 1.8em; text-transform: uppercase; letter-spacing: 1px; text-align: center; }
    .comparacion-container { max-width: 1200px; margin: 0 auto; }
    .vs-header { display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #243447 0%, #1a2634 100%); padding: 30px; border-radius: 10px; margin-bottom: 30px; border: 2px solid #f4c430; }
    .equipo-header { flex: 1; text-align: center; }
    .equipo-nombre { font-size: 1.8em; font-weight: bold; color: #fff; margin-bottom: 10px; }
    .vs-separator { font-size: 2.5em; color: #f4c430; font-weight: bold; padding: 0 30px; }
    .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
    .stat-section { background: #243447; padding: 25px; border-radius: 8px; border: 1px solid #3d4e60; }
    .stat-section-titulo { font-size: 1.3em; color: #f4c430; font-weight: bold; text-transform: uppercase; margin-bottom: 20px; text-align: center; border-bottom: 2px solid #f4c430; padding-bottom: 10px; }
    .stat-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #3d4e60; }
    .stat-row:last-child { border-bottom: none; }
    .stat-label { color: #a0aec0; font-size: 0.95em; }
    .stat-valor { color: #fff; font-weight: bold; font-size: 1.1em; }
    .mejor { color: #4ade80; }
    .ultimos-partidos { background: #243447; padding: 25px; border-radius: 8px; border: 1px solid #3d4e60; margin-bottom: 20px; }
    .ultimos-titulo { font-size: 1.3em; color: #f4c430; font-weight: bold; text-transform: uppercase; margin-bottom: 15px; text-align: center; }
    .partidos-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .partido-previo { background: #2d3e50; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3d4e60; }
    .partido-previo.victoria { border-left-color: #4ade80; }
    .partido-previo.derrota { border-left-color: #ef4444; }
    .partido-previo.empate { border-left-color: #fbbf24; }
    .partido-info { display: flex; justify-content: space-between; align-items: center; }
    .partido-resultado { font-weight: bold; font-size: 1.1em; }
    .resultado-victoria { color: #4ade80; }
    .resultado-derrota { color: #ef4444; }
    .resultado-empate { color: #fbbf24; }
    .btn-volver { display: inline-block; padding: 12px 30px; background: #f4c430; color: #0f1923; text-decoration: none; border-radius: 6px; font-weight: bold; transition: all 0.3s; text-transform: uppercase; letter-spacing: 1px; }
    .btn-volver:hover { background: #ffd700; transform: translateY(-2px); }
    .over-under-section { background: #243447; padding: 25px; border-radius: 8px; border: 1px solid #3d4e60; margin-bottom: 30px; }
    .over-under-titulo { font-size: 1.3em; color: #f4c430; font-weight: bold; text-transform: uppercase; margin-bottom: 20px; text-align: center; border-bottom: 2px solid #f4c430; padding-bottom: 10px; }
    .over-under-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
    .ou-card { background: #2d3e50; padding: 20px; border-radius: 6px; text-align: center; border: 1px solid #3d4e60; transition: all 0.3s; }
    .ou-card:hover { border-color: #f4c430; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(244, 196, 48, 0.2); }
    .ou-label { color: #a0aec0; font-size: 0.9em; margin-bottom: 10px; text-transform: uppercase; font-weight: bold; }
    .ou-porcentaje { color: #f4c430; font-size: 2em; font-weight: bold; margin-bottom: 5px; }
    .ou-cantidad { color: #a0aec0; font-size: 0.85em; }
    .pronostico-section { background: linear-gradient(135deg, #1a4d2e 0%, #0f2818 100%); padding: 30px; border-radius: 10px; border: 3px solid #4ade80; margin-bottom: 30px; box-shadow: 0 8px 20px rgba(74, 222, 128, 0.3); }
    .pronostico-titulo { font-size: 1.5em; color: #4ade80; font-weight: bold; text-transform: uppercase; margin-bottom: 20px; text-align: center; letter-spacing: 2px; }
    .pronostico-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; }
    .doble-oportunidad-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
    .pronostico-card { background: #243447; padding: 20px; border-radius: 8px; text-align: center; border: 2px solid #3d4e60; transition: all 0.3s; }
    .pronostico-card.recomendado { background: linear-gradient(135deg, #2d5a3d 0%, #1a3d28 100%); border-color: #4ade80; transform: scale(1.05); box-shadow: 0 8px 20px rgba(74, 222, 128, 0.4); }
    .pronostico-label { color: #a0aec0; font-size: 1em; margin-bottom: 10px; text-transform: uppercase; font-weight: bold; }
    .pronostico-card.recomendado .pronostico-label { color: #4ade80; }
    .pronostico-probabilidad { color: #f4c430; font-size: 2.5em; font-weight: bold; margin-bottom: 5px; }
    .pronostico-card.recomendado .pronostico-probabilidad { color: #4ade80; }
    .pronostico-cuota { color: #fbbf24; font-size: 1.2em; font-weight: bold; margin-top: 8px; padding: 5px 12px; background: #2d3e50; border-radius: 6px; display: inline-block; }
    .pronostico-card.recomendado .pronostico-cuota { background: #1a3d28; color: #4ade80; }
    .pronostico-badge { background: #4ade80; color: #0f1923; padding: 5px 15px; border-radius: 20px; font-size: 0.8em; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-top: 10px; display: inline-block; }
    .pronostico-metodo { text-align: center; color: #a0aec0; font-size: 0.9em; margin-top: 15px; padding: 15px; background: #2d3e50; border-radius: 6px; border-left: 3px solid #4ade80; }
    @media (max-width: 768px) {
        .vs-header { flex-direction: column; padding: 20px; }
        .vs-separator { transform: rotate(90deg); margin: 20px 0; }
        .stats-grid, .partidos-grid { grid-template-columns: 1fr; }
        .over-under-grid { grid-template-columns: repeat(2, 1fr); }
        .pronostico-grid, .doble-oportunidad-grid { grid-template-columns: 1fr; }
    }
</style>

<div class="comparacion-container">
    <h2>‚öîÔ∏è {{ equipo_local.nombre }} vs {{ equipo_visitante.nombre }}</h2>
    <div style="text-align: center; color: #a0aec0; margin-bottom: 30px; font-size: 1.1em;">
        <strong style="color: #f4c430;">{{ partido.liga.nombre }}</strong> - Jornada {{ partido.jornada }}
        {% if partido.fecha %}
        <br>üìÖ {{ partido.fecha|date:"d/m/Y" }} {% if partido.hora %}{{ partido.hora|time:"H:i" }}{% endif %}
        {% endif %}
        {% if partido.estado == 'finalizado' %}
        <br><span style="color: #4ade80; font-weight: bold; font-size: 1.3em; margin-top: 10px; display: inline-block;">‚úÖ PARTIDO FINALIZADO: {{ precision_analisis.resultado_real }}</span>
        {% endif %}
    </div>
    
    {% if precision_analisis and partido.estado == 'finalizado' %}
    <!-- An√°lisis de Precisi√≥n del Pron√≥stico -->
    <div style="background: linear-gradient(135deg, #1e3a5f 0%, #0f1e3a 100%); padding: 30px; border-radius: 10px; border: 3px solid #60a5fa; margin-bottom: 30px; box-shadow: 0 8px 20px rgba(96, 165, 250, 0.3);">
        <div style="font-size: 1.5em; color: #60a5fa; font-weight: bold; text-transform: uppercase; margin-bottom: 20px; text-align: center; letter-spacing: 2px;">
            üìä PRECISI√ìN DEL PRON√ìSTICO
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px;">
            <div style="background: #243447; padding: 20px; border-radius: 8px; text-align: center; border: 2px solid #4ade80;">
                <div style="color: #a0aec0; font-size: 0.9em; margin-bottom: 8px;">‚úÖ ACIERTOS</div>
                <div style="color: #4ade80; font-size: 2.5em; font-weight: bold;">{{ precision_analisis.total_aciertos }}</div>
            </div>
            <div style="background: #243447; padding: 20px; border-radius: 8px; text-align: center; border: 2px solid #ef4444;">
                <div style="color: #a0aec0; font-size: 0.9em; margin-bottom: 8px;">‚ùå ERRORES</div>
                <div style="color: #ef4444; font-size: 2.5em; font-weight: bold;">{{ precision_analisis.total_errores }}</div>
            </div>
            <div style="background: #243447; padding: 20px; border-radius: 8px; text-align: center; border: 2px solid #60a5fa;">
                <div style="color: #a0aec0; font-size: 0.9em; margin-bottom: 8px;">üìà PRECISI√ìN</div>
                <div style="color: #60a5fa; font-size: 2.5em; font-weight: bold;">{{ precision_analisis.porcentaje_aciertos }}%</div>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <!-- Aciertos -->
            <div style="background: rgba(74, 222, 128, 0.1); padding: 20px; border-radius: 8px; border: 2px solid #4ade80;">
                <div style="font-size: 1.2em; color: #4ade80; font-weight: bold; margin-bottom: 15px; text-align: center;">
                    ‚úÖ PRON√ìSTICOS ACERTADOS
                </div>
                {% for acierto in precision_analisis.aciertos %}
                <div style="background: #243447; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #4ade80;">
                    <div style="color: #4ade80; font-weight: bold; margin-bottom: 5px;">{{ acierto.categoria }}</div>
                    <div style="color: #a0aec0; font-size: 0.9em;">
                        <strong>Pron√≥stico:</strong> {{ acierto.pronostico }}<br>
                        <strong>Real:</strong> {{ acierto.real }}<br>
                        <strong>Probabilidad:</strong> <span style="color: #f4c430;">{{ acierto.prob }}%</span>
                    </div>
                </div>
                {% empty %}
                <div style="text-align: center; color: #a0aec0; padding: 20px;">No hubo aciertos</div>
                {% endfor %}
            </div>
            
            <!-- Errores -->
            <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 8px; border: 2px solid #ef4444;">
                <div style="font-size: 1.2em; color: #ef4444; font-weight: bold; margin-bottom: 15px; text-align: center;">
                    ‚ùå PRON√ìSTICOS FALLIDOS
                </div>
                {% for error in precision_analisis.errores %}
                <div style="background: #243447; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #ef4444;">
                    <div style="color: #ef4444; font-weight: bold; margin-bottom: 5px;">{{ error.categoria }}</div>
                    <div style="color: #a0aec0; font-size: 0.9em;">
                        <strong>Pron√≥stico:</strong> {{ error.pronostico }}<br>
                        <strong>Real:</strong> {{ error.real }}<br>
                        <strong>Probabilidad:</strong> <span style="color: #f4c430;">{{ error.prob }}%</span>
                    </div>
                </div>
                {% empty %}
                <div style="text-align: center; color: #a0aec0; padding: 20px;">No hubo errores</div>
                {% endfor %}
            </div>
        </div>
        
        <div style="text-align: center; color: #a0aec0; font-size: 0.95em; margin-top: 20px; padding: 15px; background: rgba(96, 165, 250, 0.1); border-radius: 8px;">
            üí° <strong>Total de pron√≥sticos evaluados:</strong> {{ precision_analisis.total_pronosticos }} | 
            <strong>Goles totales:</strong> {{ precision_analisis.total_goles_real }}
        </div>
        
        <!-- Verificaci√≥n TOP 3 Mejores Pron√≥sticos -->
        {% if precision_analisis.top_3_verificacion %}
        <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #2d1e5f 0%, #1a0f3a 100%); border-radius: 10px; border: 3px solid #9333ea;">
            <div style="font-size: 1.4em; color: #9333ea; font-weight: bold; text-transform: uppercase; margin-bottom: 20px; text-align: center; letter-spacing: 2px;">
                üèÜ VERIFICACI√ìN TOP 3 MEJORES PRON√ìSTICOS
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                {% for top in precision_analisis.top_3_verificacion %}
                <div style="background: {% if top.acierto %}rgba(74, 222, 128, 0.15){% else %}rgba(239, 68, 68, 0.15){% endif %}; padding: 20px; border-radius: 8px; border: 3px solid {% if top.acierto %}#4ade80{% else %}#ef4444{% endif %}; text-align: center; position: relative;">
                    <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: #1a2634; padding: 5px 15px; border-radius: 20px; border: 2px solid {% if top.acierto %}#4ade80{% else %}#ef4444{% endif %};">
                        {% if top.posicion == 1 %}
                        <span style="font-size: 1.5em;">ü•á</span>
                        {% elif top.posicion == 2 %}
                        <span style="font-size: 1.3em;">ü•à</span>
                        {% else %}
                        <span style="font-size: 1.2em;">ü•â</span>
                        {% endif %}
                        <span style="color: #f4c430; font-weight: bold; margin-left: 5px;">#{{ top.posicion }}</span>
                    </div>
                    
                    <div style="margin-top: 15px; margin-bottom: 12px;">
                        {% if top.acierto %}
                        <div style="font-size: 3em; color: #4ade80;">‚úÖ</div>
                        <div style="color: #4ade80; font-weight: bold; font-size: 1.1em; margin-top: 8px;">ACERTADO</div>
                        {% else %}
                        <div style="font-size: 3em; color: #ef4444;">‚ùå</div>
                        <div style="color: #ef4444; font-weight: bold; font-size: 1.1em; margin-top: 8px;">FALLIDO</div>
                        {% endif %}
                    </div>
                    
                    <div style="color: #fff; font-weight: bold; font-size: 1em; margin: 12px 0; min-height: 40px; display: flex; align-items: center; justify-content: center;">
                        {{ top.nombre }}
                    </div>
                    
                    <div style="color: #f4c430; font-size: 1.5em; font-weight: bold; margin: 8px 0;">
                        {{ top.probabilidad }}%
                    </div>
                    
                    <div style="color: #a0aec0; font-size: 0.9em;">
                        Cuota: <span style="color: #fbbf24; font-weight: bold;">{{ top.cuota }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <div style="text-align: center; margin-top: 20px; padding: 20px; background: {% if precision_analisis.precision_top3 >= 66 %}rgba(74, 222, 128, 0.1){% elif precision_analisis.precision_top3 >= 33 %}rgba(251, 191, 36, 0.1){% else %}rgba(239, 68, 68, 0.1){% endif %}; border-radius: 8px; border: 2px solid {% if precision_analisis.precision_top3 >= 66 %}#4ade80{% elif precision_analisis.precision_top3 >= 33 %}#fbbf24{% else %}#ef4444{% endif %};">
                <div style="font-size: 1.2em; color: #a0aec0; margin-bottom: 8px;">
                    üéØ <strong>PRECISI√ìN DEL TOP 3</strong>
                </div>
                <div style="font-size: 2.5em; font-weight: bold; color: {% if precision_analisis.precision_top3 >= 66 %}#4ade80{% elif precision_analisis.precision_top3 >= 33 %}#fbbf24{% else %}#ef4444{% endif %}; margin: 10px 0;">
                    {{ precision_analisis.precision_top3 }}%
                </div>
                <div style="color: #a0aec0; font-size: 1em;">
                    <span style="color: {% if precision_analisis.precision_top3 >= 66 %}#4ade80{% elif precision_analisis.precision_top3 >= 33 %}#fbbf24{% else %}#ef4444{% endif %}; font-weight: bold;">{{ precision_analisis.aciertos_top3 }}</span> 
                    de 
                    <span style="color: #f4c430; font-weight: bold;">{{ precision_analisis.total_top3 }}</span> 
                    pron√≥sticos acertados
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    {% endif %}
    
    {% if partido.estado != 'finalizado' %}
    <!-- Pron√≥stico -->
    <div class="pronostico-section">
        <div class="pronostico-titulo">üéØ PRON√ìSTICO DEL PARTIDO</div>
        <div class="pronostico-grid">
            <div class="pronostico-card {% if pronostico.recomendacion == 'local' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Victoria Local</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local }}</div>
                {% if pronostico.recomendacion == 'local' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion == 'empate' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate }}</div>
                {% if pronostico.recomendacion == 'empate' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion == 'visitante' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Victoria Visitante</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante }}</div>
                {% if pronostico.recomendacion == 'visitante' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üé≤ DOBLE OPORTUNIDAD</span>
        </div>
        
        <div class="doble-oportunidad-grid">
            <div class="pronostico-card {% if pronostico.recomendacion_doble == 'local_empate' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local o Empate</div>
                <div class="pronostico-probabilidad">{{ pronostico.doble_local_empate }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_doble_local_empate }}</div>
                {% if pronostico.recomendacion_doble == 'local_empate' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble == 'local_visitante' %}recomendado{% endif %}">
                <div class="pronostico-label">‚öîÔ∏è Local o Visitante</div>
                <div class="pronostico-probabilidad">{{ pronostico.doble_local_visitante }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_doble_local_visitante }}</div>
                {% if pronostico.recomendacion_doble == 'local_visitante' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble == 'empate_visitante' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Empate o Visitante</div>
                <div class="pronostico-probabilidad">{{ pronostico.doble_empate_visitante }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_doble_empate_visitante }}</div>
                {% if pronostico.recomendacion_doble == 'empate_visitante' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">‚öΩ PRON√ìSTICO OVER/UNDER</span>
        </div>
        
        <div class="pronostico-grid">
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'over_05' %}recomendado{% endif %}">
                <div class="pronostico-label">Over 0.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_over_05 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_over_05 }}</div>
                {% if pronostico.recomendacion_ou == 'over_05' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_over_15 }}</div>
                {% if pronostico.recomendacion_ou == 'over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_over_25 }}</div>
                {% if pronostico.recomendacion_ou == 'over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'over_35' %}recomendado{% endif %}">
                <div class="pronostico-label">Over 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_over_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_over_35 }}</div>
                {% if pronostico.recomendacion_ou == 'over_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'under_05' %}recomendado{% endif %}">
                <div class="pronostico-label">Under 0.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_under_05 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_under_05 }}</div>
                {% if pronostico.recomendacion_ou == 'under_05' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'under_15' %}recomendado{% endif %}">
                <div class="pronostico-label">Under 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_under_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_under_15 }}</div>
                {% if pronostico.recomendacion_ou == 'under_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'under_25' %}recomendado{% endif %}">
                <div class="pronostico-label">Under 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_under_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_under_25 }}</div>
                {% if pronostico.recomendacion_ou == 'under_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_under_35 }}</div>
                {% if pronostico.recomendacion_ou == 'under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'over_45' %}recomendado{% endif %}">
                <div class="pronostico-label">Over 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_over_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_over_45 }}</div>
                {% if pronostico.recomendacion_ou == 'over_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_ou == 'under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_under_45 }}</div>
                {% if pronostico.recomendacion_ou == 'under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üéØ AMBOS EQUIPOS MARCAN</span>
        </div>
        
        <div class="doble-oportunidad-grid" style="grid-template-columns: 1fr 1fr; max-width: 600px; margin: 0 auto;">
            <div class="pronostico-card {% if pronostico.recomendacion_btts == 'si' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úÖ S√≠ Marcan</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_ambos_marcan }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_ambos_si }}</div>
                {% if pronostico.recomendacion_btts == 'si' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_btts == 'no' %}recomendado{% endif %}">
                <div class="pronostico-label">‚ùå No Marcan</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_ambos_no_marcan }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_ambos_no }}</div>
                {% if pronostico.recomendacion_btts == 'no' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üìä RESULTADO EXACTO M√ÅS PROBABLE</span>
        </div>
        
        <div style="text-align: center; background: #243447; padding: 30px; border-radius: 8px; border: 2px solid #f4c430; max-width: 400px; margin: 0 auto;">
            <div style="font-size: 3em; font-weight: bold; color: #f4c430; margin-bottom: 10px;">
                {{ pronostico.score_exacto_local }} - {{ pronostico.score_exacto_visitante }}
            </div>
            <div style="color: #a0aec0; font-size: 0.95em;">Basado en promedios de goles</div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üè† VICTORIA LOCAL + GOLES</span>
        </div>
        
        <div class="pronostico-grid">
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_over_05' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Over 0.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_over_05 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_over_05 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_over_05' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_over_15 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_over_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_under_25' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Under 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_under_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_under_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_under_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_under_35 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'local_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">üè† Local + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_local_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_local_under_45 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'local_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">‚úàÔ∏è VICTORIA VISITANTE + GOLES</span>
        </div>
        
        <div class="pronostico-grid">
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_05' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Over 0.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_over_05 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_over_05 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_05' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_over_15 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_over_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_25' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Under 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_under_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_under_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_under_35 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">‚úàÔ∏è Visitante + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_visitante_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_visitante_under_45 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'visitante_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">ü§ù EMPATE + GOLES</span>
        </div>
        
        <div class="pronostico-grid">
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_05' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Over 0.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_over_05 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_over_05 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_05' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_over_15 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_over_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_25' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Under 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_under_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_under_25 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_under_35 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">ü§ù Empate + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_empate_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_empate_under_45 }}</div>
                {% if pronostico.recomendacion_victoria_empate_over == 'empate_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üéØ DOBLE OPORTUNIDAD + GOLES</span>
        </div>
        
        <div style="margin-top: 20px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1em; font-weight: bold;">1X (Local o Empate) + Over/Under</span>
        </div>
        
        <div class="doble-oportunidad-grid" style="grid-template-columns: repeat(4, 1fr); max-width: 1000px; margin: 0 auto;">
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '1x_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">1X + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_1x_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_1x_over_15 }}</div>
                {% if pronostico.recomendacion_doble_over == '1x_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '1x_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">1X + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_1x_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_1x_over_25 }}</div>
                {% if pronostico.recomendacion_doble_over == '1x_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '1x_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">1X + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_1x_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_1x_under_35 }}</div>
                {% if pronostico.recomendacion_doble_over == '1x_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '1x_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">1X + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_1x_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_1x_under_45 }}</div>
                {% if pronostico.recomendacion_doble_over == '1x_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 20px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1em; font-weight: bold;">12 (Local o Visitante) + Over/Under</span>
        </div>
        
        <div class="doble-oportunidad-grid" style="grid-template-columns: repeat(4, 1fr); max-width: 1000px; margin: 0 auto;">
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '12_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">12 + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_12_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_12_over_15 }}</div>
                {% if pronostico.recomendacion_doble_over == '12_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '12_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">12 + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_12_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_12_over_25 }}</div>
                {% if pronostico.recomendacion_doble_over == '12_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '12_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">12 + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_12_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_12_under_35 }}</div>
                {% if pronostico.recomendacion_doble_over == '12_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == '12_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">12 + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_12_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_12_under_45 }}</div>
                {% if pronostico.recomendacion_doble_over == '12_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 20px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1em; font-weight: bold;">X2 (Empate o Visitante) + Over/Under</span>
        </div>
        
        <div class="doble-oportunidad-grid" style="grid-template-columns: repeat(4, 1fr); max-width: 1000px; margin: 0 auto;">
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == 'x2_over_15' %}recomendado{% endif %}">
                <div class="pronostico-label">X2 + Over 1.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_x2_over_15 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_x2_over_15 }}</div>
                {% if pronostico.recomendacion_doble_over == 'x2_over_15' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == 'x2_over_25' %}recomendado{% endif %}">
                <div class="pronostico-label">X2 + Over 2.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_x2_over_25 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_x2_over_25 }}</div>
                {% if pronostico.recomendacion_doble_over == 'x2_over_25' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == 'x2_under_35' %}recomendado{% endif %}">
                <div class="pronostico-label">X2 + Under 3.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_x2_under_35 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_x2_under_35 }}</div>
                {% if pronostico.recomendacion_doble_over == 'x2_under_35' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.recomendacion_doble_over == 'x2_under_45' %}recomendado{% endif %}">
                <div class="pronostico-label">X2 + Under 4.5</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_x2_under_45 }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_x2_under_45 }}</div>
                {% if pronostico.recomendacion_doble_over == 'x2_under_45' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 30px; margin-bottom: 15px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.2em; font-weight: bold; text-transform: uppercase;">üé≤ MARGEN DE VICTORIA</span>
        </div>
        
        <div class="doble-oportunidad-grid" style="grid-template-columns: 1fr 1fr; max-width: 600px; margin: 0 auto;">
            <div class="pronostico-card {% if pronostico.margen_recomendado == 'amplia' %}recomendado{% endif %}">
                <div class="pronostico-label">üìà Victoria Amplia</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_victoria_amplia }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_victoria_amplia }}</div>
                <div style="color: #a0aec0; font-size: 0.85em; margin-top: 8px;">Diferencia ‚â•2 goles</div>
                {% if pronostico.margen_recomendado == 'amplia' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
            <div class="pronostico-card {% if pronostico.margen_recomendado == 'ajustada' %}recomendado{% endif %}">
                <div class="pronostico-label">üìä Victoria Ajustada</div>
                <div class="pronostico-probabilidad">{{ pronostico.prob_victoria_ajustada }}%</div>
                <div class="pronostico-cuota">Cuota: {{ pronostico.cuota_victoria_ajustada }}</div>
                <div style="color: #a0aec0; font-size: 0.85em; margin-top: 8px;">Diferencia 1 gol</div>
                {% if pronostico.margen_recomendado == 'ajustada' %}
                <span class="pronostico-badge">‚úì RECOMENDADO</span>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 50px; margin-bottom: 20px; text-align: center;">
            <span style="color: #f4c430; font-size: 1.5em; font-weight: bold; text-transform: uppercase;">‚≠ê TOP 3 MEJORES PRON√ìSTICOS</span>
        </div>
        
        <div class="pronostico-grid" style="max-width: 1200px; margin: 0 auto;">
            {% for mejor in pronostico.mejores_pronosticos %}
            <div class="pronostico-card {% if mejor.posicion == 1 %}recomendado{% endif %}" style="{% if mejor.posicion == 1 %}transform: scale(1.05);{% endif %}">
                <div style="text-align: center; margin-bottom: 10px;">
                    {% if mejor.posicion == 1 %}
                    <span style="font-size: 2.5em;">ü•á</span>
                    {% elif mejor.posicion == 2 %}
                    <span style="font-size: 2.2em;">ü•à</span>
                    {% else %}
                    <span style="font-size: 2em;">ü•â</span>
                    {% endif %}
                </div>
                <div style="font-size: 0.9em; color: #f4c430; font-weight: bold; margin-bottom: 8px;">
                    #{{ mejor.posicion }} MEJOR OPCI√ìN
                </div>
                <div class="pronostico-label" style="font-size: 1.1em; font-weight: bold; margin-bottom: 10px; min-height: 45px; display: flex; align-items: center; justify-content: center;">
                    {{ mejor.nombre }}
                </div>
                <div class="pronostico-probabilidad" style="font-size: 1.8em; {% if mejor.posicion == 1 %}color: #4ade80;{% else %}color: #60a5fa;{% endif %} margin: 12px 0;">
                    {{ mejor.probabilidad }}%
                </div>
                <div class="pronostico-cuota" style="font-size: 1.1em; margin-bottom: 12px;">
                    Cuota: {{ mejor.cuota }}
                </div>
                {% if mejor.posicion == 1 %}
                <span class="pronostico-badge">‚úì M√ÅXIMA PROBABILIDAD</span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        
        <div style="color: #a0aec0; font-size: 0.95em; margin: 25px auto; max-width: 800px; text-align: center; padding: 15px; background: rgba(61, 78, 96, 0.3); border-radius: 8px;">
            üí° <strong>Recomendaci√≥n:</strong> Estos son los 3 pron√≥sticos con mayor probabilidad de √©xito seg√∫n nuestro an√°lisis estad√≠stico completo
        </div>
        
        <div class="pronostico-metodo">
            <strong style="color: #4ade80;">üìä Metodolog√≠a:</strong> {{ pronostico.metodo }}
        </div>
    </div>
    {% endif %}
    
    {% if partido.estado != 'finalizado' %}
    <div class="vs-header">
        <div class="equipo-header">
            <div class="equipo-nombre">{{ equipo_local.nombre }}</div>
            <div style="color: #a0aec0;">Local</div>
        </div>
        <div class="vs-separator">VS</div>
        <div class="equipo-header">
            <div class="equipo-nombre">{{ equipo_visitante.nombre }}</div>
            <div style="color: #a0aec0;">Visitante</div>
        </div>
    </div>
    
    <div class="stats-grid">
        <!-- Estad√≠sticas Local -->
        <div class="stat-section">
            <div class="stat-section-titulo">üìä {{ equipo_local.nombre }}</div>
            <div class="stat-row">
                <span class="stat-label">Partidos Jugados</span>
                <span class="stat-valor">{{ stats_local.partidos_jugados }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Victorias</span>
                <span class="stat-valor" style="color: #4ade80;">{{ stats_local.victorias }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Empates</span>
                <span class="stat-valor" style="color: #fbbf24;">{{ stats_local.empates }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Derrotas</span>
                <span class="stat-valor" style="color: #ef4444;">{{ stats_local.derrotas }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Puntos</span>
                <span class="stat-valor {% if stats_local.puntos > stats_visitante.puntos %}mejor{% endif %}">{{ stats_local.puntos }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Promedio Puntos/Partido</span>
                <span class="stat-valor {% if stats_local.promedio_puntos > stats_visitante.promedio_puntos %}mejor{% endif %}">{{ stats_local.promedio_puntos }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Goles a Favor</span>
                <span class="stat-valor {% if stats_local.goles_favor > stats_visitante.goles_favor %}mejor{% endif %}">{{ stats_local.goles_favor }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Goles en Contra</span>
                <span class="stat-valor {% if stats_local.goles_contra < stats_visitante.goles_contra %}mejor{% endif %}">{{ stats_local.goles_contra }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Diferencia de Goles</span>
                <span class="stat-valor {% if stats_local.diferencia_goles > stats_visitante.diferencia_goles %}mejor{% endif %}">{{ stats_local.diferencia_goles|stringformat:"+d" }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Promedio Goles/Partido</span>
                <span class="stat-valor {% if stats_local.promedio_goles > stats_visitante.promedio_goles %}mejor{% endif %}">{{ stats_local.promedio_goles }}</span>
            </div>
        </div>
        
        <!-- Estad√≠sticas Visitante -->
        <div class="stat-section">
            <div class="stat-section-titulo">üìä {{ equipo_visitante.nombre }}</div>
            <div class="stat-row">
                <span class="stat-label">Partidos Jugados</span>
                <span class="stat-valor">{{ stats_visitante.partidos_jugados }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Victorias</span>
                <span class="stat-valor" style="color: #4ade80;">{{ stats_visitante.victorias }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Empates</span>
                <span class="stat-valor" style="color: #fbbf24;">{{ stats_visitante.empates }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Derrotas</span>
                <span class="stat-valor" style="color: #ef4444;">{{ stats_visitante.derrotas }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Puntos</span>
                <span class="stat-valor {% if stats_visitante.puntos > stats_local.puntos %}mejor{% endif %}">{{ stats_visitante.puntos }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Promedio Puntos/Partido</span>
                <span class="stat-valor {% if stats_visitante.promedio_puntos > stats_local.promedio_puntos %}mejor{% endif %}">{{ stats_visitante.promedio_puntos }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Goles a Favor</span>
                <span class="stat-valor {% if stats_visitante.goles_favor > stats_local.goles_favor %}mejor{% endif %}">{{ stats_visitante.goles_favor }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Goles en Contra</span>
                <span class="stat-valor {% if stats_visitante.goles_contra < stats_local.goles_contra %}mejor{% endif %}">{{ stats_visitante.goles_contra }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Diferencia de Goles</span>
                <span class="stat-valor {% if stats_visitante.diferencia_goles > stats_local.diferencia_goles %}mejor{% endif %}">{{ stats_visitante.diferencia_goles|stringformat:"+d" }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Promedio Goles/Partido</span>
                <span class="stat-valor {% if stats_visitante.promedio_goles > stats_local.promedio_goles %}mejor{% endif %}">{{ stats_visitante.promedio_goles }}</span>
            </div>
        </div>
    </div>
    
    <!-- Over/Under Local -->
    <div class="over-under-section">
        <div class="over-under-titulo">üéØ Over/Under - {{ equipo_local.nombre }}</div>
        <div class="over-under-grid">
            <div class="ou-card">
                <div class="ou-label">Over 1.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_over_15 }}%</div>
                <div class="ou-cantidad">{{ stats_local.over_15 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 2.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_over_25 }}%</div>
                <div class="ou-cantidad">{{ stats_local.over_25 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 3.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_over_35 }}%</div>
                <div class="ou-cantidad">{{ stats_local.over_35 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 4.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_over_45 }}%</div>
                <div class="ou-cantidad">{{ stats_local.over_45 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 1.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_under_15 }}%</div>
                <div class="ou-cantidad">{{ stats_local.under_15 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 2.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_under_25 }}%</div>
                <div class="ou-cantidad">{{ stats_local.under_25 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 3.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_under_35 }}%</div>
                <div class="ou-cantidad">{{ stats_local.under_35 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 4.5</div>
                <div class="ou-porcentaje">{{ stats_local.porcentaje_under_45 }}%</div>
                <div class="ou-cantidad">{{ stats_local.under_45 }} partidos</div>
            </div>
        </div>
    </div>
    
    <!-- Over/Under Visitante -->
    <div class="over-under-section">
        <div class="over-under-titulo">üéØ Over/Under - {{ equipo_visitante.nombre }}</div>
        <div class="over-under-grid">
            <div class="ou-card">
                <div class="ou-label">Over 1.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_over_15 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.over_15 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 2.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_over_25 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.over_25 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 3.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_over_35 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.over_35 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Over 4.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_over_45 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.over_45 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 1.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_under_15 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.partidos_jugados|add:"-"|add:stats_visitante.over_15 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 2.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_under_25 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.partidos_jugados|add:"-"|add:stats_visitante.over_25 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 3.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_under_35 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.partidos_jugados|add:"-"|add:stats_visitante.over_35 }} partidos</div>
            </div>
            <div class="ou-card">
                <div class="ou-label">Under 4.5</div>
                <div class="ou-porcentaje">{{ stats_visitante.porcentaje_under_45 }}%</div>
                <div class="ou-cantidad">{{ stats_visitante.partidos_jugados|add:"-"|add:stats_visitante.over_45 }} partidos</div>
            </div>
        </div>
    </div>
    
    <div class="ultimos-partidos">
        <div class="ultimos-titulo">üìÖ √öltimos 5 Partidos</div>
        <div class="partidos-grid">
            <!-- √öltimos partidos Local -->
            <div>
                <h3 style="color: #f4c430; margin-bottom: 15px; text-align: center;">{{ equipo_local.nombre }}</h3>
                {% for partido in ultimos_local %}
                <div class="partido-previo {{ partido.resultado }}">
                    <div class="partido-info">
                        <div>
                            <strong>{{ partido.rival }}</strong><br>
                            <small style="color: #a0aec0;">Jornada {{ partido.jornada }}</small>
                        </div>
                        <div class="partido-resultado resultado-{{ partido.resultado }}">
                            {{ partido.marcador }}
                        </div>
                    </div>
                </div>
                {% empty %}
                <div style="text-align: center; color: #a0aec0; padding: 20px;">Sin partidos jugados</div>
                {% endfor %}
            </div>
            
            <!-- √öltimos partidos Visitante -->
            <div>
                <h3 style="color: #f4c430; margin-bottom: 15px; text-align: center;">{{ equipo_visitante.nombre }}</h3>
                {% for partido in ultimos_visitante %}
                <div class="partido-previo {{ partido.resultado }}">
                    <div class="partido-info">
                        <div>
                            <strong>{{ partido.rival }}</strong><br>
                            <small style="color: #a0aec0;">Jornada {{ partido.jornada }}</small>
                        </div>
                        <div class="partido-resultado resultado-{{ partido.resultado }}">
                            {{ partido.marcador }}
                        </div>
                    </div>
                </div>
                {% empty %}
                <div style="text-align: center; color: #a0aec0; padding: 20px;">Sin partidos jugados</div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <div style="text-align: center; margin-top: 30px;">
        <a href="{% url 'ligas:lista_partidos' partido.liga.id %}" class="btn-volver">‚Üê Volver a Partidos</a>
    </div>
</div>
{% endblock %}
